<!DOCTYPE html>
<html>
<head>
	<title><?php echo $tipo .' ' . $section_id ?></title>
	<link href="../page/css/main.css?v=<?php echo DEDALO_VERSION ?>" rel="stylesheet">
	<?php /*<link href="<?php echo DEDALO_CORE_URL ?>/common/css/structure.css" rel="stylesheet"> */?>
	<link rel="shortcut icon" href="../../favicon.ico" />
</head>
<body>
	<div id="main" class="hide"></div>
	<div id="debug" class="debug hide"></div>
</body>
<script rel="preload" defer="defer" src="../common/js/environment.js.php"></script>
<script defer="defer" src="../../lib/tinymce/js/tinymce/tinymce.min.js"></script>
<link rel="modulepreload" href="../common/js/components_list.js?v=<?php echo DEDALO_VERSION ?>">
<script type="module">
	const t0 = performance.now()

	// page instance
	import {get_instance} from '../common/js/instances.js'
	import {dd_console} from '../common/js/utils/index.js'
	( async () => {

		const main = document.getElementById("main")
			  main.classList.add("loading")

		// page instance
			const page = await get_instance({
				model	: 'page',
				context	: <?php echo json_encode($context, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES) ?>
			})

		// page instance build and render
			const build			= await page.build()
			const wrapper_page	= await page.render()

		// main add and restore class
			main.appendChild(wrapper_page)
	 		main.classList.remove("loading","hide")

		// debug
			if(SHOW_DEBUG===true) {
				// console.log("%c + Page instantiated and rendered total (ms): ", 'background: #000000; color: violet', performance.now()-t0 )
				dd_console(`Page instantiated and rendered total: ${performance.now()-t0} ms`)
			}
	})()
</script>
</html>