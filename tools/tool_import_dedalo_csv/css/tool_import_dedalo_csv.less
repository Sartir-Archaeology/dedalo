/**
* TOOL_IMPORT_DEDALO_CSV
*
* Loaded on tool init
*/

// imports
@import (once) '../../../core/page/css/layout/vars';

// local vars
@tool_color: #17a2b8;

// tool wrapper
// Encapsulate all tool content to prevent core collisions
.wrapper_tool.tool_import_dedalo_csv {

	.spinner {
		border-top-color: @tool_color;
	}

	>.service_upload_container {
		position: relative;
		width: 100%;
		min-height: 138px;

		>.spinner {
			top: 67%;
		}

		>.content_data {
			padding: 1rem;
		}
	}

	>.content_data {
		display: block;
		position: relative;
		max-width: 100vw;
		overflow: hidden;

		// generic box
		.container {
			padding: 0.5rem;
		}

		>.files_list {

			>.file_item {
				background-color: @color_grey_15;
				margin-bottom: 0.75rem;
				padding: 0.75rem;
				padding-bottom: 0.5rem;
				border-radius: 0.25rem;

				>* {
					margin-bottom: 0.5rem;
				}

				>.file_line {
					display: flex;
					flex-wrap: wrap;
					align-items: center;
					position: relative;

					.button.csv {
						font-size: 1.5rem;
						background-color: @color_grey_9;
						margin-right: 0.5rem;

						&.active {
							background-color: @color_blue_3;
						}
					}

					.checkbox_label {
						display: block;
						line-height: 1.1rem;
						max-width: 75%;
						word-break: break-all;

						input {
							margin-right: 0.5rem;
							vertical-align: middle;
						}
					}

					.arrow_right {
					    -webkit-mask-image: url(../../../core/themes/default/icons/arrow_down.svg);
						mask-image: url(../../../core/themes/default/icons/arrow_down.svg);
						background-color: @color_grey_10;
						margin-left: 1rem;
						padding: 0.5rem;
						right: 0;
						transform: rotate(-90deg);

						&.active {
							background-color: @color_blue_3;
						}
					}

					.section_tipo_label {
						display: flex;
						align-items: center;
						margin-left: 1rem;
						color: @color_grey_9;

						>input {
							width: 9rem;
							text-align: center;
							font-size: 0.9rem;
							margin-left: 0.33rem;
							border: 1px solid @color_grey_13;
							border-radius: 3px;
						}

						>.section_name {
							display: inline-block;
							margin-left: 0.5rem;
						}

						>.section_label {
							display: inline-block;
							margin-left: 0.5rem;
							font-weight: 600;
							color: @color_grey_4;
						}
					}

					.button.delete {
						position: absolute;
						right: 0px;

						@media screen and (max-width: @width_break_point_0) {
							top: 0px;
						}
					}

					@media screen and (max-width: @width_break_point_0) {

						.button.csv {
							width: 2rem;
						}

						.checkbox_label {
							width: calc(100% - 2rem);
							line-height: 1.2rem;
						}

						.section_tipo_label {
							width: 100%;
							display: grid;
							grid-template-columns: 1fr 1fr;
							grid-gap: 0.5rem;
							padding-top: 0.5rem;
							padding-bottom: 0.5rem;

							.section_name {
								margin-left: 0px;
							}
						}

						.arrow_right {
							display: none;
						}
					}
				}//end >.file_line

				.warning {
					background-color: @color_orange_dedalo;
					color: @color_white;
					padding: 0.5rem;
					border-radius: 3px;
				}
				.info_container {

					.info_text {

						.columns {
							font-size: 0.75rem;
						}
					}
					.bulk_process_name_label {
						color: @color_grey_9;
						margin-left: 3rem;
					}
					.bulk_process_label {
						width: 50%;
					}
				}

				.button_preview {
					text-transform: capitalize;
					opacity: 0.8;
					line-height: 1.3rem;
				}

				>.preview {
					background-color: @color_green_light;
					font-size: 0.8rem;
					white-space: pre;
					overflow: auto;
				}

				>.columns_mapper {
					width: 100%;
					max-width: 100%;
					overflow: hidden;


					>.columns_header {
						width: 100%;
						padding: 0.5rem;
						background-color: @color_grey_13;
						color: @color_grey_4;
						cursor: pointer;
					}
					>.columns_body {
						display: grid;
						grid-template-columns: minmax(5rem,10rem) minmax(9rem,14rem) minmax(7rem,10rem) minmax(3rem,4.5rem) minmax(7rem,30rem) minmax(7rem,auto);
						background-color: @color_grey_14;
						border-radius: 5px;

						>.columns_mapper_line {
							display: contents;
							position: relative;

							> * {
								padding: 0.12rem;
								line-height: 1.2em;
								align-self: center;
								overflow: auto;
							}

							&.names > div{
								padding-top: 0.33rem;
								padding-bottom: 0.33rem;
								background-color: @color_info;
								color: @color_white;
								position: sticky;
								top: 0;
								z-index: 1;
							}

							div:first-child {
								padding-left: 0.5rem;
							}
							.target_container {

								.column_select {
									width: 98%;
									background: none;
									appearance: auto;
									background-color: @color_white;
								}
								.mapped_to_options_container {

									.decimal_label {
										margin: 1.1em;
									}

									.decimal_select {
										background: none;
										appearance: auto;
										background-color: @color_white;
									}
								}
							}
						}
						@media screen and (max-width: 1024px) {
							display: block;
							>.columns_mapper_line {
								display: block;
								border-bottom: 1px solid @color_black;

								> * {
									border-bottom: 1px solid @color_grey_13;
									padding-top: 0.2rem;
									padding-bottom: 0.2rem;
								}

								&.names > div {
									padding: 0.33rem;
								}
							}
						}
					}
				}//end >.columns_mapper

				.result_container {

					// OK/Error message
					>.response_msg {
						border: none;
					}

					// like 'Section: numisdata41. Total records created:0 - updated:998 - failed:0'
					>.user_msg_container {
						padding: 0.66rem;
						padding-left: 0px;
					}

					>.dedalo_last_error_container {
						display: block;
						padding: 0.66rem;
						color: @color_danger;
						font-weight: 500;
						line-height: 1.1rem;

						--icon-path : url('../../../core/themes/default/icons/warning.svg');

						&:before {
							background-color: @color_danger;
							content: ' ';
							display: inline-block;
							height: 1.5em;
							width: 1.5em;
							margin-right: 0.5rem;
							opacity: 1;
							vertical-align: bottom;
							// .fn_add_mask(@icon_name);
							-webkit-mask-image: var(--icon-path);
									mask-image: var(--icon-path);
							-webkit-mask-size: contain;
									mask-size: contain;
							-webkit-mask-repeat: no-repeat;
									mask-repeat: no-repeat;
							-webkit-mask-position: center;
									mask-position: center;

							@media screen and (max-width: @width_break_point_1) {
								margin-right: 0px;
							}
						}

						>.error_pre {
							background-color: unset;
						}
					}

					>.result_info_container {
						margin-top: 1em;
						border-top: 1px solid @color_grey_13;
						padding: 1rem;

						>.header {
							display: flex;
							align-items: center;
							margin-top: 1rem;

							>.label {
								flex: 1;
								margin-top: 1em;
								margin-bottom: 1rem;
								font-size: 1.25rem;
								font-weight: 500;
							}

							>.copy_button {
								margin-bottom: 1rem;
							}
						}
						>.section_id_container {
							columns: 5em auto;
							border-left: 2px solid @color_orange_dedalo;
							padding-left: 2rem;
							line-height: 1.2rem;
						}
						>.failed_container {
							padding-top: 1em;
							padding-left: 1em;
						}
						>.failed_data_container {
							padding-top: 1em;
							padding-left: 2em;
							padding-bottom: 0.5em;
						}
					}
				}
			}//end >.file_item
		}//end >.files_list

		>.submit_container {
			padding: 1rem;
			padding-left: 0;
			display: flex;
			align-items: center;

			>.import_button {
				margin-right: 1rem;
				margin-left: 0.75rem;
				margin-bottom: 0.5rem;
			}

			>label {
				>input {
					margin-right: 0.25rem;
				}
			}
		}

		>.process_info_container {
			display: flex;
			justify-content: center;
			width: 100%;

			.process_status_node {
				width: auto;
				margin-left: 20%;
				margin-right: 20%;
				min-width: 65vw;

				@media screen and (max-width: @width_break_point_0) {
					min-width: unset;
					width: 100%;
					margin-left: unset;
					margin-right: unset;
				}
			}

			.info_node {

			}
		}
	}//end content_data
}//end wrapper_tool

// modal header tool modification
.tool_header.tool_import_dedalo_csv {
	background-color: @tool_color;
}
