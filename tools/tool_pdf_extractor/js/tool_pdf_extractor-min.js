import{data_manager}from"../../../core/common/js/data_manager.js";import{get_instance,delete_instance}from"../../../core/common/js/instances.js";import{common}from"../../../core/common/js/common.js";import{tool_common}from"../../../tool_common/js/tool_common.js";import{render_tool_pdf_extractor}from"./render_tool_pdf_extractor.js";export const tool_pdf_extractor=function(){return this.id,this.model,this.mode,this.node,this.ar_instances,this.status,this.events_tokens,this.type,this.caller,this.max_size_bytes,!0};tool_pdf_extractor.prototype.render=common.prototype.render,tool_pdf_extractor.prototype.destroy=common.prototype.destroy,tool_pdf_extractor.prototype.edit=render_tool_pdf_extractor.prototype.edit,tool_pdf_extractor.prototype.init=async function(t){this.trigger_url=DEDALO_TOOLS_URL+"/tool_pdf_extractor/trigger.tool_pdf_extractor.php";const o=tool_common.prototype.init.call(this,t);return this.config={method:"txt",page_in:!1,page_out:!1},o},tool_pdf_extractor.prototype.build=async function(t=!1){return tool_common.prototype.build.call(this,t)},tool_pdf_extractor.prototype.get_pdf_data=async function(t){const o={component_tipo:t.caller.tipo,section_id:t.caller.section_id,section_tipo:t.caller.section_tipo},e=await fetch(t.trigger_url,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({mode:"get_pdf_data",extractor_config:t.config,component:o})}).then((function(t){if(!t.ok)throw Error(t.statusText);return t})).then(t=>t.json()).catch(t=>(console.error("!!!!! REQUEST ERROR: ",t),{result:!1,msg:t.message,error:t}));return t.max_size_bytes=e.result.max_size_bytes,t.sys_get_temp_dir=e.result.sys_get_temp_dir,t.upload_tmp_dir=e.result.upload_tmp_dir,t.upload_tmp_perms=e.result.upload_tmp_perms,t.session_cache_expire=e.result.session_cache_expire,e.result};