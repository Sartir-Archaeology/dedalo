"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function dump(e,t){try{t&&console.log("-- "+t+":"),console.log(e)}catch(e){}}function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function html2text(e){return e.replace(/<(?:.|\n)*?>/gm,"")}function replaceAll(e,t,n){return void 0===n?null:n.replace(new RegExp(e,"g"),t)}function getFunctionName(){var e=/function (.*?)\(/,t=getFunctionName.caller.toString(),n;return e.exec(t)[1]}function get_current_url_vars(){var r={},e=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){r[t]=n});return r}function get_parameter_value(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n,r,o=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===o?"":o[1]}function change_url_variable(e,t,n){for(var r,o=e.split("&"),a,i=o.length-1;0<=i;i--){var s=o[i].split("=");s[0]==t&&(o[i]=s[0]+"="+n)}return o.join("&")}function remove_url_variable(e,t){var n=t.split("?")[0],r,o=[],a=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==a){for(var i,s=(o=a.split("&")).length-1;0<=s;s-=1)(r=o[s].split("=")[0])===e&&o.splice(s,1);n=n+"?"+o.join("&")}return n}function build_url_arguments_from_vars(e){var t=[];for(var n in e){var r=e[n];t.push(n+"="+r)}return t.join("&")}function includeStyle(e){document.write("<link rel='stylesheet' href='"+e+"'>")}function includeScript(e){document.write("<script src='"+e+"'><\/script>")}function tryParseJSON(e){try{var t=JSON.parse(e);if(t&&"object"===_typeof(t)&&null!==t)return t}catch(e){}return!1}function toogle_height(e,t){var n=e.scrollHeight,r=e.offsetHeight;e.style.cursor=3*r<n?($(e).height(n),e.style.overflow="visible","n-resize"):($(e).height(t),e.style.overflow="hidden","s-resize")}function resizeIframe(e){return setTimeout(function(){e.style.height=e.contentWindow.document.body.scrollHeight+"px"},10),!0}function exec_scripts_inside(e){var d=Array.prototype.slice.call(e.getElementsByTagName("script")),t;return new Promise(function(e,t){for(var n=(new Date).getTime(),r=d.length,o=0;o<r;o++){if(!0===SHOW_DEBUG)var a=(new Date).getTime();if(""!==d[o].src){var i=document.createElement("script");i.src=d[o].src,document.getElementsByTagName("head")[0].appendChild(i)}else{var s;new Function(d[o].innerHTML)()}if(!0===SHOW_DEBUG)var l=(new Date).getTime(),c=l-n,u=l-a}})}function insertAndExecute(n,r){return r?(new Promise(function(e,t){(n.innerHTML=r.innerHTML)?e("DOM updated!"):t(Error("Error on append child"))}).then(function(e){exec_scripts_inside(n)},function(e){console.log("[insertAndExecute] error ",e)}),!0):(console.error("[common.insertAndExecute] ERROR content_obj is null"),!1)}function find_ancestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function call_custom_function(e,t){for(var n=e.split("."),r=this,o=n.length,a=0;a<o;a++)r=r[n[a]];"function"==typeof r&&r.apply(this,t)}function cloneDeep(e){var t,n;if("object"!==_typeof(e))return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(t=[],n=0;n<e.length;n+=1)t[n]=cloneDeep(e[n]);return t}for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=cloneDeep(e[n]));return t}function is_obj_equal(r,o){var e=Object.keys(r).sort(),n=Object.keys(o).sort();return e.length===n.length&&(!!e.every(function(e,t){return e===n[t]})&&e.every(function(e){var t=r[e],n=o[e];return Array.isArray(t)?xah_is_array_equal(t,n):"object"===_typeof(t)&&null!==t?xah_is_obj_equal(t,n):t===n}))}var dummyConsole=[],console=console||{},instances;console.log||(console.log=function(e){dummyConsole.push(e)});var get_instance=function e(t){var n=t.name,r=t.id_wrapper,o=t.init;(instances=[]).push({id:0}),console.log("name",n),console.log("id_wrapper",r);var a=instances.filter(function(e){return e.id==r&&e});return!1===a&&(a=Object.create(window[n],{id:{value:r}}),instances.push(a),a.init(o)),console.log("instances",instances),console.log("current_instance",a),a},common=new function(){this.trigger_url=DEDALO_LIB_BASE_URL+"/common/trigger.common.php",this.isString=function(e){return"string"==typeof e||"object"===_typeof(e)&&e.constructor===String},this.inArray=function(e,t){return jQuery.inArray(e,t)},this.jump_select_lang=function(e){var t=e.dataset.type_of_lang,n=e.value,r=null,o=null;"dedalo_application_lang"===t?o=r=n:"dedalo_data_lang"===t&&(o=n);var a=this.trigger_url,i={mode:"change_lang",top_tipo:page_globals.top_tipo,dedalo_application_lang:r,dedalo_data_lang:o},s=document.getElementById("html_page_wrap"),l;return html_page.loading_content(s,1),common.get_json_data(a,i).then(function(e){!0===SHOW_DEBUG&&console.log(e),location.reload(!1)},function(e){console.log(e),inspector.show_log_msg("<span class='error'>Error when jump_select_lang</span>"),html_page.loading_content(s,0)})},this.get_inner_html=function(e){var t=$.parseHTML(e),r=null;return $.each(t,function(e,t){if("DIV"!==t.nodeName)return!0;var n=$(t).contents();return r=$(n.context).html(),!1}),r},this.safe_tipo=function(e){var t,n;return/^[a-z]+[0-9]+$/gm.exec(e)?e:null},this.get_page_height=function(){var e=document.body,t=document.documentElement,n;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},this.print_response=function(e){return'<div class="log_messages_response">'+e+"</div>"},this.stop_all_videos=function(){var e=document.getElementsByTagName("video");if(e)for(var t,n=e.length-1;0<=n;n--)e[n].pause(),e[n].src="",e[n].removeAttribute("src")},this.get_json_data=function(e,t,o){var a=e;void 0!==o&&!1===o||(o=!0);var i=JSON.stringify(t);return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("POST",a,o),r.setRequestHeader("Content-type","application/json"),r.responseType="json",r.onload=function(e){200===r.status?t(r.response):n(Error("Reject error don't load successfully; error code: "+r.statusText))},r.onerror=function(e){n(Error("There was a network error. data_send: "+a+"?"+i+"statusText:"+r.statusText))},r.send(i)})},this.urldecode=function(e){var t;return decodeURIComponent(e.replace(/\+/g," "))},this.addslashes=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},this.build_modal_dialog=function(e){var t=document.createElement("div");if(t.classList.add("modal-dialog"),void 0!==e.modal_dialog_class)for(var n=e.modal_dialog_class.length-1;0<=n;n--)t.classList.add(e.modal_dialog_class[n]);t.setAttribute("role","document");var r=document.createElement("div");r.classList.add("modal-content"),t.appendChild(r);var o=document.createElement("div");o.classList.add("modal-header"),r.appendChild(o);var a=document.createElement("button");a.classList.add("close"),a.dataset.dismiss="modal",a.setAttribute("aria-label","Close"),o.appendChild(a);var i=document.createElement("span");i.setAttribute("aria-hidden","true");var s=document.createTextNode("x");i.appendChild(s),a.appendChild(i),void 0!==e.header&&e.header&&o.appendChild(e.header);var l=document.createElement("div");if(l.classList.add("modal-body"),r.appendChild(l),void 0!==e.body&&l.appendChild(e.body),void 0!==e.footer&&e.footer){var c=document.createElement("div");c.classList.add("modal-footer"),r.appendChild(c),c.appendChild(e.footer)}var u=document.createElement("div");return u.id=e.id,u.setAttribute("role","dialog"),u.setAttribute("tabindex","-1"),void 0!==e.animation&&!1===e.animation?u.classList.add("modal"):u.classList.add("modal","fade"),u.appendChild(t),u},this.is_json=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},this.create_dom_element=function(e){var t=e.element_type,n=e.parent,r=e.class_name,o=e.style,a=e.data_set;void 0===a&&void 0!==e.dataset&&(a=e.dataset);var i=e.custom_function_events,s=e.title_label,l=e.text_node,c=e.text_content,u=e.inner_html,d=e.id,p=e.draggable,f=e.value,m=e.src,_=e.type,g=document.createElement(t);if(d&&(g.id=d),"a"===t&&(g.href="javascript:;"),r&&(g.className=r),o)for(var h in o)g.style[h]=o[h];if(s&&(g.title=s),a)for(var v in a)g.dataset[v]=a[v];if(f&&(g.value=f),i)for(var y=i.length,b=0;b<y;b++){var E=i[b].name,w=i[b].type,x=i[b].function_arguments;this.create_custom_events(g,w,E,x)}if(l)if("span"===t)g.textContent=l;else{var L=document.createElement("span");L.innerHTML=" "+l,g.appendChild(L)}else c?g.textContent=c:u&&(g.innerHTML=u);return n&&n.appendChild(g),p&&(g.draggable=p),m&&(g.src=m),_&&(g.type=_),g},this.create_custom_events=function(e,t,n,r){return void 0===r&&(r=[]),r.unshift(null),r.unshift(null),e.addEventListener(t,function(e){r[0]=this,r[1]=e,call_custom_function(n,r)},!1)},this.uniq=function(e){var n={boolean:{},number:{},string:{}},r=[];return e.filter(function(e){var t=_typeof(e);return t in n?!n[t].hasOwnProperty(e)&&(n[t][e]=!0):!(0<=r.indexOf(e))&&r.push(e)})},this.export_str=function(e,t){if(!confirm('\nAre you sure to EXPORT and overwrite structure data in file \n "dedalo4_development_str.custom.backup" ?\n'))return!1;var n=DEDALO_LIB_BASE_URL+"/backup/trigger.db_utils.php",r={mode:"export_str"},o;return t||((t=document.getElementById("log_messages")).classList.add("show_str_data"),t.addEventListener("dblclick",function(){this.innerHTML="",this.classList.remove("show_str_data")})),t&&(t.innerHTML="Loading..",html_page.loading_content(t,1)),common.get_json_data(n,r).then(function(e){!0===SHOW_DEBUG&&console.log("[common.export_str] response: "+r.mode,e),e?t?t.innerHTML=e.msg:(console.log("[common.export_str] ",e.msg),alert("[common.export_str] Error. wrap_obj not found")):console.log("[common.export_str] Error. null response"),t&&html_page.loading_content(t,0)})},this.load_script=function(a,i){var e;return new Promise(function(e,t){var n;if(!0===common.is_loaded_component_script(a,"script"))e(a);else{var r=document.createElement("script");if(void 0!==i)for(var o in i)r[o]=i[o];else r.async=!0;r.src=a,r.onload=function(){e(a)},r.onerror=function(){t(a)},document.getElementsByTagName("head")[0].appendChild(r)}})},this.load_style=function(o){var e;return new Promise(function(e,t){var n;if(!0===common.is_loaded_component_script(o,"link"))e(o);else{var r=document.createElement("link");r.rel="stylesheet",r.href=o,r.onload=function(){e(o)},r.onerror=function(){t(o)},document.getElementsByTagName("head")[0].appendChild(r)}})},this.is_loaded_component_script=function(e,t){if("link"===t){for(var n=document.getElementsByTagName("link"),r,o=n.length-1;0<=o;o--)if(n[o].getAttribute("href")===e)return!0}else for(var a=document.getElementsByTagName("script"),i,s=a.length-1;0<=s;s--)if(a[s].getAttribute("src")===e)return!0;return!1},this.execute_function_by_name=function(e,t){for(var n=Array.prototype.slice.call(arguments,2),r=e.split("."),o=r.pop(),a=0;a<r.length;a++)t=t[r[a]];return t[o].apply(t,n)},this.create_new_CSS_style_sheet=function(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet},this.get_locale_from_code=function(e){var t;switch(e){case"lg-eng":t="en-US";break;case"lg-spa":t="es-ES";break;case"lg-cat":t="ca";break;default:t=e.substring(3)+"-"+e.substring(3).toUpperCase()}return t},this.safe_number=function(e){var t=e,n=new RegExp("^[+-]?\\d+([.,]\\d+)$"),r=new RegExp("^[+-]?\\d+$");return n.test(t)?(t=t.replace(/,/g,"."),t=parseFloat(t)):r.test(t)&&(t=parseInt(t)),t}},goto_url=function e(t){return window.location=t},test_object_vars=function e(t,n){var r=Object.keys(t).length,o=0;for(var a in t){if(void 0===t[a])return alert("["+n+"] Error : undefined "+a,"Error"),!1;if(++o===r)return!0}};jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)};var propagate_url_var=function e(t,n){if(!n)return!1;var r=get_parameter_value(window.location.href,t);if(0<r.length){for(var o=n.getElementsByTagName("a"),a,i=o.length-1;0<=i;i--){var s;get_parameter_value(o[i].href,t).length<1&&(o[i].href=o[i].href+"&"+t+"="+r)}return!0}return!1};Array.prototype.move=function(e,t){var n,r;if((e=parseInt(e,10))!==(t=parseInt(t,10))&&0<=e&&e<=this.length&&0<=t&&t<=this.length){if(r=this[e],e<t)for(n=e;n<t;n++)this[n]=this[n+1];else for(n=e;t<n;n--)this[n]=this[n-1];this[t]=r}};
//# sourceMappingURL=common-min.js.map